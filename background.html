<html>
<script type="text/javascript" src="lib/jquery-1.6.4.min.js"></script>
<script type="text/javascript" src="/third_party/chromium/chrome_ex_oauthsimple.js"></script>
<script type="text/javascript" src="/third_party/chromium/chrome_ex_oauth.js"></script>
<script>
    (function($) {
        chrome.extension.onRequest.addListener(
            function(request, sender, sendResponse) {
                if (request.type === 'fetch_entry') {
                    $.get(request.url, function(data) {
                        sendResponse({"data":data});
                    });
                } else if (request.type === 'open_tab') {
                    chrome.tabs.create({'url':request.url});
                    sendResponse({"status":"ok"});
                }
            }
        );

        var consumer_key = 'nBe40pYhSUJSayFB4bMfsg';
        var consumer_secret = 'R3eSybg4wWWExyjA2jKZA0vVu5WeOfQkRKpHywXpM';
        var oauth = ChromeExOAuth.initBackgroundPage({
            'request_url':'https://api.twitter.com/oauth/request_token',
            'authorize_url':'https://api.twitter.com/oauth/authorize',
            'access_url':'https://api.twitter.com/oauth/access_token',
            'consumer_key':consumer_key,
            'consumer_secret':consumer_secret,
            'app_name':'greader-plugin'
        });

        oauth.authorize(function() {

        });
    })(jQuery);
</script>
</html>
